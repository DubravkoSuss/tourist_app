
## Project Structure

```
lib/
├── data/                  # Data layer (external data sources)
├── domain/                # Business logic layer (pure Dart)
├── presentation/          # UI layer (Flutter widgets)
├── injection_container.dart  # Dependency injection setup
└── main.dart              # Application entry point
domain/
├── entities/
│   ├── sight.dart                     # Sight entity (tourist attraction)
│   │   └── Core business object representing a tourist sight
│   │       - Properties: id, name, description, location, imageUrl, rating, etc.
│   │       - Pure Dart class with no dependencies
│   │
│   └── user.dart                      # User entity
│       └── Core business object representing an authenticated user
│           - Properties: uid, email, displayName, photoUrl
│           - Pure Dart class with no dependencies
│
├── repositories/
│   ├── auth_repository.dart           # Authentication contract
│   │   └── Abstract interface for authentication operations
│   │       - signIn(email, password)
│   │       - signUp(email, password)
│   │       - signOut()
│   │       - getCurrentUser()
│   │
│   ├── sights_repository.dart         # Sights management contract
│   │   └── Abstract interface for sight operations
│   │       - getSights()
│   │       - getSightById(id)
│   │       - searchSights(query)
│   │
│   └── favorites_repository.dart      # Favorites management contract
│       └── Abstract interface for favorites operations
│           - getFavorites(userId)
│           - addFavorite(userId, sightId)
│           - removeFavorite(userId, sightId)
│           - isFavorite(userId, sightId)
│
└── usecases/
    ├── auth/
    │   ├── sign_in_usecase.dart       # UseCase: Sign in user
    │   │   └── Handles user authentication with email/password
    │   │
    │   ├── sign_up_usecase.dart       # UseCase: Register new user
    │   │   └── Handles new user registration
    │   │
    │   ├── sign_out_usecase.dart      # UseCase: Sign out user
    │   │   └── Handles user sign out
    │   │
    │   └── get_current_user_usecase.dart  # UseCase: Get current user
    │       └── Retrieves currently authenticated user
    │
    ├── sights/
    │   └── get_sights_usecase.dart    # UseCase: Get all sights
    │       └── Retrieves list of tourist sights
    │
    └── favorites/
        ├── get_favorites_usecase.dart  # UseCase: Get user favorites
        │   └── Retrieves user's favorite sights
        │
        ├── add_favorite_usecase.dart   # UseCase: Add favorite
        │   └── Adds a sight to user's favorites
        │
        ├── remove_favorite_usecase.dart # UseCase: Remove favorite
        │   └── Removes a sight from user's favorites
        │
        └── is_favorite_usecase.dart    # UseCase: Check if favorite
            └── Checks if a sight is in user's favorites
data/
├── datasources/
│   ├── local/
│   │   ├── favorites_local_datasource.dart  # Local favorites storage
│   │   │   └── Manages favorites using Hive/SharedPreferences
│   │   │       - saveFavorite(userId, sightId)
│   │   │       - getFavorites(userId)
│   │   │       - deleteFavorite(userId, sightId)
│   │   │
│   │   └── mock_sights_data.dart            # Mock data for development
│   │       └── Provides sample sight data for testing
│   │           - List of predefined sights
│   │           - Used for offline development/testing
│   │
│   └── remote/
│       ├── firebase_service.dart             # Firebase client wrapper
│       │   └── Initializes and configures Firebase services
│       │       - Firebase Auth setup
│       │       - Firestore setup
│       │       - Error handling wrapper
│       │
│       └── firebase_sights_datasource.dart   # Firebase sights data source
│           └── Fetches sights from Firebase Firestore
│               - getSightsFromFirestore()
│               - getSightById(id)
│               - Real-time updates support
│
├── models/
│   ├── sight_model.dart                      # Sight Data Transfer Object
│   │   └── JSON-serializable model for Sight entity
│   │       - Extends/implements Sight entity
│   │       - fromJson() and toJson() methods
│   │       - Firebase document mapping
│   │
│   └── sight_model.g.dart                    # Generated JSON serialization
│       └── Auto-generated by json_serializable
│           - JSON parsing logic
│           - Type-safe serialization
│
└── repositories/
    ├── auth_repository_impl.dart             # Authentication implementation
    │   └── Implements AuthRepository using Firebase Auth
    │       - Uses Firebase Authentication SDK
    │       - Handles auth state changes
    │       - Error mapping to domain failures
    │
    ├── sights_repository_impl.dart           # Sights repository implementation
    │   └── Implements SightsRepository
    │       - Uses FirebaseSightsDataSource for remote data
    │       - Uses MockSightsData as fallback
    │       - Caching strategy (optional)
    │
    └── favorites_repository_impl.dart        # Favorites implementation
        └── Implements FavoritesRepository
            - Uses FavoritesLocalDataSource for persistence
            - Sync with Firebase (optional)
            - Fast local access
presentation/
├── bloc/
│   ├── auth/
│   │   └── auth_bloc.dart                    # Authentication state management
│   │       └── Manages authentication state and events
│   │           - Events: SignInRequested, SignUpRequested, SignOutRequested
│   │           - States: AuthInitial, Authenticated, Unauthenticated, AuthLoading
│   │
│   ├── sights/
│   │   └── sights_bloc.dart                  # Sights state management
│   │       └── Manages sights loading and display
│   │           - Events: LoadSights, SearchSights
│   │           - States: SightsInitial, SightsLoading, SightsLoaded, SightsError
│   │
│   └── favorites/
│       └── favorites_bloc.dart               # Favorites state management
│           └── Manages user favorites
│               - Events: LoadFavorites, AddFavorite, RemoveFavorite
│               - States: FavoritesLoading, FavoritesLoaded, FavoritesError
│
├── screens/
│   ├── splash_screen.dart                    # Splash/Loading screen
│   │   └── Initial app loading screen
│   │       - App initialization
│   │       - Check authentication status
│   │       - Navigate to appropriate screen
│   │
│   ├── auth/
│   │   ├── sign_in_screen.dart               # Sign in screen
│   │   │   └── User login interface
│   │   │       - Email/password input
│   │   │       - Social sign-in buttons (optional)
│   │   │       - Navigate to sign up
│   │   │       - Forgot password link
│   │   │
│   │   ├── sign_up_screen.dart               # Sign up screen
│   │   │   └── User registration interface
│   │   │       - Email/password registration
│   │   │       - Profile setup
│   │   │       - Terms acceptance
│   │   │
│   │   ├── forgot_password_screen.dart       # Password reset request
│   │   │   └── Request password reset email
│   │   │       - Email input
│   │   │       - Send reset link
│   │   │
│   │   ├── reset_password_screen.dart        # Password reset confirmation
│   │   │   └── Confirm password reset
│   │   │       - New password input
│   │   │       - Confirm new password
│   │   │
│   │   └── email_confirmation_screen.dart    # Email verification
│   │       └── Email verification prompt
│   │           - Resend verification
│   │           - Check verification status
│   │
│   ├── home/
│   │   ├── home_screen.dart                  # Main home screen
│   │   │   └── Bottom navigation with tabs
│   │   │       - Sights tab
│   │   │       - Favorites tab
│   │   │       - Map tab (optional)
│   │   │       - Profile/Settings tab
│   │   │
│   │   ├── sights_tab.dart                   # Sights list tab
│   │   │   └── Browse all tourist sights
│   │   │       - List/Grid view of sights
│   │   │       - Search functionality
│   │   │       - Filter options
│   │   │       - Pull to refresh
│   │   │
│   │   ├── favorites_tab.dart                # Favorites list tab
│   │   │   └── User's favorite sights
│   │   │       - List of favorited sights
│   │   │       - Remove favorites
│   │   │       - Empty state message
│   │   │
│   │   ├── sight_details_screen.dart         # Sight detail view
│   │   │   └── Detailed information about a sight
│   │   │       - Image gallery
│   │   │       - Description
│   │   │       - Location on map
│   │   │       - Reviews/ratings
│   │   │       - Favorite toggle button
│   │   │
│   │   ├── map_screen.dart                   # Map view of sights
│   │   │   └── Interactive map showing sights
│   │   │       - Map with sight markers
│   │   │       - Tap marker to view details
│   │   │       - Current location
│   │   │
│   │   ├── Profile_screen.dart               # User profile screen
│   │   │   └── User profile and account management
│   │   │       - Profile picture
│   │   │       - User information
│   │   │       - Edit profile
│   │   │       - Sign out
│   │   │
│   │   └── settings_tab.dart                 # Settings screen
│   │       └── App settings and preferences
│   │           - Notification settings
│   │           - Language selection
│   │           - Privacy settings
│   │           - About app
│   │
│   └── messages/
│       ├── messages_screen.dart              # Messages list
│       │   └── User messages/conversations
│       │       - List of conversations
│       │       - Unread message badges
│       │       - Search conversations
│       │
│       └── chat_screen.dart                  # Chat conversation
│           └── Individual chat interface
│               - Message history
│               - Send messages
│               - Image sharing
│
└── widgets/
    ├── sight_card.dart                       # Sight card widget
    │   └── Reusable sight display card
    │       - Sight image
    │       - Name and rating
    │       - Favorite button
    │       - Tap to view details
    │
    ├── loading_widget.dart                   # Loading indicator
    │   └── Reusable loading spinner
    │       - Consistent loading UI
    │       - Custom styling
    │
    └── custom_loading.dart                   # Custom loading animation
        └── Animated loading indicator
            - Lottie animation (optional)
            - Branded loading experience
```

### Request Flow (User Action → Data)
```
User Interaction (Screen/Widget)
    ↓
BLoC Event Dispatch
    ↓
BLoC processes event → calls UseCase
    ↓
UseCase executes business logic
    ↓
UseCase calls Repository Interface (Domain)
    ↓
Repository Implementation (Data) called
    ↓
DataSource fetches data
    ↓
External Source (Firebase, Local Storage)
```

### Response Flow (Data → UI Update)
```
External Source returns data
    ↓
DataSource processes raw data
    ↓
Repository maps data to Domain Entity
    ↓
UseCase returns result to BLoC
    ↓
BLoC emits new State
    ↓
UI Widget rebuilds with new state
    ↓
User sees updated interface
```